CREATE TABLE PATIENTS(
PATIENTID INT PRIMARY KEY,
FIRSTNAME VARCHAR(20),
LASTNAME CHAR(20),
GENDER CHAR(1) CHECK (GENDER IN('M','F')),
DATEOFBIRTH DATE,
PHONENUMBER NUMBER(10) UNIQUE,
EMAIL VARCHAR(100) CHECK (EMAIL LIKE '%@%.%')
)
DESC PATIENTS
CREATE TABLE DOCTORS(
DOCTORID INT PRIMARY KEY,
FIRSTNAME VARCHAR(20),
LASTNAME CHAR(20),
SPECIALIZATION VARCHAR(40),
PHONENUMBER NUMBER(10) UNIQUE
)
DESC DOCTORS
CREATE TABLE APPOINTMENTS(
APPOINTMENTID INT PRIMARY KEY,
PATIENTID INT,
DOCTORID INT,
APPOINTMENTDATE DATE,
DIAGNOSIS VARCHAR(100),
FEES NUMBER CHECK( FEES>0),
CONSTRAINT PT_FK FOREIGN KEY(PATIENTID) REFERENCES PATIENTS(PATIENTID),
CONSTRAINT DC_FK FOREIGN KEY(DOCTORID) REFERENCES DOCTORS(DOCTORID)
)
DESC APPOINTMENTS
ALTER TABLE PATIENTS ADD BLOODGROUP VARCHAR(2)
DESC PATIENTS

INSERT ALL
  INTO PATIENTS (PATIENTID, FIRSTNAME, LASTNAME, GENDER, DATEOFBIRTH, PHONENUMBER, EMAIL, BLOODGROUP)
  VALUES (1212, 'Anu', 'Sharma', 'F', TO_DATE('25/02/2001', 'DD/MM/YYYY'), 9897654324, 'anusharma02@gmail.com', 'O+')
  
  INTO PATIENTS (PATIENTID, FIRSTNAME, LASTNAME, GENDER, DATEOFBIRTH, PHONENUMBER, EMAIL, BLOODGROUP)
  VALUES (1213, 'Aradhya', 'Patel', 'F', TO_DATE('05/12/2005', 'DD/MM/YYYY'), 9845624237, 'aradhyapatel1@gmail.com', 'A+')
  
  INTO PATIENTS (PATIENTID, FIRSTNAME, LASTNAME, GENDER, DATEOFBIRTH, PHONENUMBER, EMAIL, BLOODGROUP)
  VALUES (1214, 'Benedict', 'Jones', 'M', TO_DATE('11/05/2011', 'DD/MM/YYYY'), 9811654211, 'benjones13@gmail.com', 'AB+')
  
  INTO PATIENTS (PATIENTID, FIRSTNAME, LASTNAME, GENDER, DATEOFBIRTH, PHONENUMBER, EMAIL, BLOODGROUP)
  VALUES (1215, 'Chandrika', 'Kumar', 'F', TO_DATE('03/08/1991', 'DD/MM/YYYY'), 9443164151, 'chandrikumar63@gmail.com', 'A-')
  
  INTO PATIENTS (PATIENTID, FIRSTNAME, LASTNAME, GENDER, DATEOFBIRTH, PHONENUMBER, EMAIL, BLOODGROUP)
  VALUES (1216, 'Zachariah', 'Jayan', 'M', TO_DATE('15/03/1998', 'DD/MM/YYYY'), 9961278904, 'zachjayan98@gmail.com', 'O+')
SELECT * FROM dual;

INSERT ALL
INTO APPOINTMENTS(APPOINTMENTID,PATIENTID,DOCTORID,APPOINTMENTDATE,DIAGNOSIS,FEES) VALUES(9865,1212,1001,TO_DATE('05/12/2021','DD/MM/YYYY'),'PALPITATIONS',1000)
INTO APPOINTMENTS(APPOINTMENTID,PATIENTID,DOCTORID,APPOINTMENTDATE, DIAGNOSIS, FEES)VALUES(9875,1213,1002,TO_DATE('03/12/2021','DD/MM/YYYY'),'FEVER', 750)
INTO APPOINTMENTS(APPOINTMENTID,PATIENTID,DOCTORID,APPOINTMENTDATE,DIAGNOSIS,FEES)VALUES(9877,1214,1002,TO_DATE('07/12/2021','DD/MM/YYYY'),'GAS TROUBLES',650)
INTO APPOINTMENTS(APPOINTMENTID,PATIENTID,DOCTORID,APPOINTMENTDATE,DIAGNOSIS,FEES)VALUES(9880,1215, 1001,TO_DATE('10/12/2021','DD/MM/YYYY'),'ANGEOPLASTY',2500)
INTO APPOINTMENTS(APPOINTMENTID,PATIENTID,DOCTORID,APPOINTMENTDATE,DIAGNOSIS,FEES)VALUES(9883,1215,1003,TO_DATE('11/12/2021','DD/MM/YYYY'),'ULCERS',500)
INTO APPOINTMENTS(APPOINTMENTID,PATIENTID,DOCTORID,APPOINTMENTDATE,DIAGNOSIS,FEES)VALUES(9886,1216,1002,TO_DATE('11/12/2021','DD/MM/YYYY'),'SINUSITIS',1500)
SELECT * FROM dual;
SELECT * FROM APPOINTMENTS

UPDATE APPOINTMENTS SET FEES = FEES * 1.15 WHERE APPOINTMENTID = 9877
SELECT * FROM APPOINTMENTS

ALTER TABLE APPOINTMENTS DROP CONSTRAINT PT_FK
ALTER TABLE APPOINTMENTS DROP CONSTRAINT DC_FK
ALTER TABLE APPOINTMENTS ADD CONSTRAINT PT_FK 
FOREIGN KEY(PATIENTID) REFERENCES PATIENTS(PATIENTID) ON DELETE CASCADE
ALTER TABLE APPOINTMENTS ADD CONSTRAINT DC_FK 
FOREIGN KEY(DOCTORID) REFERENCES DOCTORS(DOCTORID) ON DELETE CASCADE
DELETE FROM APPOINTMENTS WHERE APPOINTMENTID = 9877
SELECT * FROM APPOINTMENTS
